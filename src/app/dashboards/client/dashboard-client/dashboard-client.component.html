<header id="header" class="header d-flex align-items-center fixed-top">
  <div class="container-fluid container-xl position-relative d-flex align-items-center">

    <a href="index.html" class="logo d-flex align-items-center me-auto">
     
      <span class="sitename">A<span style="text-transform: lowercase;">uto</span><span>C<span style="text-transform: lowercase;">are</span></span></span>

    </a>

    <nav id="navmenu" class="navmenu">
      <ul >
        <li><a href="#hero" class="active" >Welcome to our platform</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#services">Our Services</a></li>
        <li>
          <div class="d-flex">
            <a [routerLink]="['/auth/login']" class="btn-get-started" aria-label="Login">
              <i class="fa-solid fa-arrow-right"></i>
              <span>LogIn</span>
            </a>
          </div>
        </li>
        
        
      </ul>
      <button class="mobile-nav-toggle d-xl-none bi bi-list" aria-label="Toggle navigation"></button>

    </nav>


  </div>
</header>
<div class="dashboard-container" style="margin-top: 6rem;">
  <header class="dashboard-header">
    <h2>Bienvenue dans votre espace AutoCare</h2>
  </header>

  <div class="dashboard-content">
    <!-- Section prise de rendez-vous -->
    <section class="appointment-section card">
      <h3 class="section-title">üìÖ Prendre un rendez-vous</h3>
      <form (ngSubmit)="bookAppointment()" class="appointment-form">
        <div class="form-group">
          <label for="appointment-date">Date</label>
          <input 
            type="date" 
            id="appointment-date"
            [(ngModel)]="newAppointment.date" 
            name="date" 
            required
            class="form-control"
            [min]="getTodayDate()">
        </div>

        <div class="form-group">
          <label for="appointment-time">Heure</label>
          <input 
            type="time" 
            id="appointment-time"
            [(ngModel)]="newAppointment.time" 
            name="time" 
            required
            class="form-control"
            min="08:00" 
            max="18:00">
        </div>

        <div class="form-group">
          <label for="appointment-service">Service</label>
          <select 
            id="appointment-service"
            [(ngModel)]="newAppointment.service" 
            name="service" 
            required
            class="form-control">
            <option value="" disabled selected>S√©lectionnez un service</option>
            <option *ngFor="let service of services" [value]="service">{{service}}</option>
          </select>
        </div>

        <button type="submit" class="btn-primary" [disabled]="!isFormValid()">
          R√©server
        </button>
      </form>
    </section>

    <!-- Section rendez-vous √† venir -->
    <section class="upcoming-section card">
      <h3 class="section-title">üõ†Ô∏è Mes rendez-vous</h3>
      <div *ngIf="activeAppointments.length === 0" class="empty-state">
        Aucun rendez-vous programm√©
      </div>
      <ul class="appointment-list">
        <li *ngFor="let rdv of activeAppointments" class="appointment-item">
          <div class="appointment-details">
            <span class="service">{{rdv.service}}</span>
            <span class="datetime">{{rdv.date | date:'dd/MM/yyyy'}} √† {{rdv.time}}</span>
            <span class="status" [ngClass]="rdv.status.toLowerCase()">
              {{getStatusText(rdv.status)}}
            </span>
          </div>

          <div class="action-btns">
            
            <button 
            *ngIf="rdv.status === 'Pending'"
            (click)="editAppointment(rdv)"
            class="btn-edit">
            Modifier
          </button>

          <button 
            *ngIf="rdv.status === 'Pending' || rdv.status === 'Confirmed'"
            (click)="cancelAppointment(rdv.id)"
            class="btn-cancel">
            Annuler
          </button>

          </div>
        </li>
      </ul>
    </section>

    <!-- Section historique -->
    <section class="history-section card">
      <h3 class="section-title">üîß Historique des diagnostics</h3>
      <div *ngIf="diagnostics.length === 0" class="empty-state">
        Aucun diagnostic enregistr√©
      </div>
      <ul class="diagnostic-list">
        <li *ngFor="let diag of diagnostics" class="diagnostic-item">
          <span class="date">{{diag.date | date:'dd/MM/yyyy'}}</span>
          <span class="description">{{diag.description}}</span>
        </li>
      </ul>
    </section>
  </div>
</div>